<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Beanmother</title>
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <div id="nav">
    <ul>
      <li class='first current'>
        <a href="#about" class="about">Introduction</a>
      </li>
      <li class=''>
        <a href="#usage" class="usage">Usage</a>
      </li>
      <li class=''>
        <a href="#customization" class="customization">Customization</a>
      </li>
      <li class=''>
        <a href="#tests" class="tests">Tests</a>
      </li>
      <li class=''>
        <a href="#contributions" class="contributions">Contributions</a>
      </li>
    </ul>
  </div>

  <div id="version">
    <!-- v.0.12 -->
  </div>



  <div id="content">
    <h1 id="beanmother" name="about">Beanmother</h1>
    <p>
      <a href="https://search.maven.org/#search%7Cga%7C1%7Cio.beanmother">
        <img src="https://maven-badges.herokuapp.com/maven-central/io.beanmother/beanmother-core/badge.svg" alt="Maven Central" />
      </a>
      <a href="https://travis-ci.org/keepcosmos/beanmother">
        <img src="https://travis-ci.org/keepcosmos/beanmother.svg?branch=master" alt="Build Status" />
      </a>
      <a href="https://coveralls.io/github/keepcosmos/beanmother?branch=master">
        <img src="https://coveralls.io/repos/github/keepcosmos/beanmother/badge.svg?branch=master" alt="Coverage Status" />
      </a>
      <a href="http://javadoc.io/doc/io.beanmother/beanmother-core">
        <img src="http://javadoc.io/badge/io.beanmother/beanmother-core.svg" alt="Javadocs" />
      </a>
      <a href="https://opensource.org/licenses/Apache-2.0">
        <img src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" alt="License" />
      </a>
    </p>

    <p>
      <img src="../image.png" alt="image" />
    </p>

    <p>Beanmother helps to create your various and complex objects super easily with fixtures for testing. It encourages developers
      to write more tests.</p>

    <p>Beanmother is a implementation of
      <a href="https://martinfowler.com/bliki/ObjectMother.html">ObjectMother</a> pattern and also fixture replacement tool. You do not need to write extra code(like factories or builders)
      for creating test objects. Beanmother helps to create fresh and randomized bean objects for every types of test. You
      can use a your bean as it is.</p>

    <p>Java 7 and above are supported.</p>

    <h2 id="example">Example</h2>

    <p>Create fixture
      <code>.yml</code> file in
      <code>test/resources/fixtures</code> as a convention.</p>

    <pre><code class="yaml language-yaml block"># test/resources/fixtures/publishing.yml
        
        book: &amp;book
          title: ${faker.book.title}
          language: en
          publishedAt: ${faker.date.between('2000-01-01', '2010-01-01')}
        
        author:
          id: ${sequence.number}
          name: ${faker.book.author}
          introduction: ${faker.lorem.paragraph}
          birth: ${faker.date.between('1990-01-01', '2000-01-01')}
          gender: MALE
          works:
            - &lt;&lt;: *book
            - &lt;&lt;: *book
            - &lt;&lt;: *book
        </code></pre>

    <p>
      <a href="http://yaml.org/spec/1.1/">YAML format</a> is very easy to read and write. It is expressive and extensible. You can use scripts provided by Beanmother
      to create multiple types of random data and global sequentail numbers.</p>

    <pre><code class="java language-java block">ObjectMother objectMother = ObjectMother.getInstance();
        
        @Test
        public void testSingleObject() {
            Book book = objectMother.bear("book", Book.class);
            Author author = objectMother.bear("author", Author.class);    
        }
        
        @Test
        public void testMultipleObjects() {
            List&lt;Author&gt; authors = objectMother.bear("author", Author.class, 10);
        }
        </code></pre>

    <p>And just create!</p>

    <h2 id="usage" name="usage">Usage</h2>

    <ul>
      <li>
        <a href="#installation">Installation</a>
      </li>

      <li>
        <a href="#fxture-script">Fixture Script</a>
      </li>

      <li>
        <a href="#arguments-constructor-bean">Arguments-constructor bean</a>
      </li>

      <li>
        <a href="#post-processor">Post Processor</a>
      </li>

      <li>
        <a href="#customization">Customization</a>
      </li>
    </ul>

    <h3 id="installation">Installation</h3>

    <ul>
      <li>Apache Maven</li>
    </ul>

    <pre><code class="xml language-xml block">&lt;dependency&gt;
            &lt;groupId&gt;io.beanmother&lt;/groupId&gt;
            &lt;artifactId&gt;beanmother-core&lt;/artifactId&gt;
            &lt;version&gt;0.7.3&lt;/version&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
        </code></pre>

    <ul>
      <li>Gradle</li>
    </ul>

    <pre><code class="groovy language-groovy block">testCompile 'io.beanmother:beanmother-core:0.7.3'
        </code></pre>

    <h4 id="extensions">Extensions</h4>

    <ul>
      <li>For java8 time and optional data type</li>
    </ul>

    <pre><code class="xml language-xml block">&lt;dependency&gt;
            &lt;groupId&gt;io.beanmother&lt;/groupId&gt;
            &lt;artifactId&gt;beanmother-java8-converter&lt;/artifactId&gt;
            &lt;version&gt;0.7.3&lt;/version&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
        </code></pre>

    <pre><code class="groovy language-groovy block">testCompile 'io.beanmother:beanmother-java8-converter:0.7.3'
        </code></pre>

    <ul>
      <li>For Joda-time data type</li>
    </ul>

    <pre><code class="xml language-xml block">&lt;dependency&gt;
            &lt;groupId&gt;io.beanmother&lt;/groupId&gt;
            &lt;artifactId&gt;beanmother-joda-time-converter&lt;/artifactId&gt;
            &lt;version&gt;0.7.3&lt;/version&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
        </code></pre>

    <pre><code class="groovy language-groovy block">testCompile 'io.beanmother:beanmother-joda-time-converter:0.7.3'
        </code></pre>

    <h3 id="fixturescript">Fixture Script</h3>

    <p>The scripts provided by Beanmother is a kind of fake property value generator.</p>

    <pre><code class="yml language-yml block">author:
          title: ${faker.book.title}
        </code></pre>

    <p>Currently,
      <code>FakerScriptRunner</code> and
      <code>SeqenceScriptRunner</code> are registered as a default.</p>

    <ul>
      <li>
        <code>FakerScriptRunner</code> works with
        <code>faker</code> namespace. the script runner is implemented by
        <a href="https://github.com/DiUS/java-faker">java-faker</a>. you can find a usage of java-faker in
        <a href="http://dius.github.io/java-faker/apidocs/index.html">document</a>. If a method has no arguments, you can ignore parentheses. for example,</li>
    </ul>

    <pre><code class="yaml language-yaml block">beer:
          hop: ${faker.beer.hop}
          malt: ${faker.beer.malt}
          created_at: ${faker.date.between('1990-01-01', '2000-01-01')}
        </code></pre>

    <ul>
      <li>
        <code>SequenceScriptRunner</code> works with
        <code>sequence</code> namespace. the script generate sequential number globally. for example,</li>
    </ul>

    <pre><code class="yaml language-yaml block">person:
          id: ${sequence.number}
        </code></pre>

    <h3 id="argumentsconstructorbean">Arguments constructor bean</h3>

    <p>If a bean does not have no-argument contructor, just add
      <code>_construct</code> key. for example,</p>

    <pre><code class="yaml language-yaml block">price:
          _construct:
            - 3
            - USD
        </code></pre>

    <h3 id="postprocessor">PostProcessor</h3>

    <p>If you need to common configuration for specific beans, you can use
      <a href="#register-post-processors">PostProcessor</a>.</p>

    <h2 id="customization" name="customization">Customization</h2>

    <p>
      <code>ObjectMother</code> class is a default implementation of
      <code>AbstractBeanMother</code> class. For customization, simply extend
      <code>AbstractBeanMother</code>. Highly recommended to build as a singleton instance. </p>

    <pre><code class="java language-java block">public class MyObjectMother extends AbstractBeanMother {
        
            private static MyObjectMother myObjectMother = new MyObjectMother();
        
            private MyObjectMother() {
                super();
            }
        
        
            // Override for adding your default fixture directory paths
            @Override
            public String[] defaultFixturePaths() {
                return new String[]{ 'test-models', 'fixtures' };
            }
        
            // Override for adding your custom Converter.
            @Override
            protected void configureConverterFactory(ConverterFactory converterFactory) {
                converterFactory.register(new MyConverter());
            }
        
            // Override for adding your custom ScriptRunner.
            @Override
            protected void configureScriptHandler(ScriptHandler scriptHandler) {
                scriptHandler.register(new MyScriptRunner);     
            }
        
            // Override for adding your custom PostProcessor.
            @Override
            protected void configurePostProcessorFactory(PostProcessorFactory postProcessorFactory) {
                postProcessorFactory.register(new MyPostProcessor);
            }
        }
        </code></pre>

    <h4 id="registerpostprocessors">Register PostProcessors</h4>

    <p>A PostProcessor can handle you bean after mapper.</p>

    <pre><code class="java language-java block">public class AuthorPostProcessor extends PostProcessor&lt;Author&gt; {
            @Override
            public void process(Author bean, FixtureMap fixtureMap) {
                for(Book book : bean.getWorks()) {
                    book.setAuthor(bean);
                }
            }
        }
        </code></pre>

    <p>And pass the instance as a argument when you create a instance.</p>

    <pre><code class="java language-java block">Author author = ObjectMother.bear("author", Author.class, new AuthorPostProcessor());
        </code></pre>

    <p>or, register the PostProcessor to your custom BeanMother for using globally.</p>

    <pre><code class="java language-java block">@Override
        protected void configurePostProcessorFactory(PostProcessorFactory postProcessorFactory) {
            postProcessorFactory.register(new AuthorPostProcessor());
        }
        </code></pre>

    <p>Everytime you create a instance of Author,
      <code>AuthorPostProcessor</code> will run before return a instance of Author.</p>

    <h4 id="customizedefaultfixturepath">Customize default fixture path.</h4>

    <p>Just register the path in ObjectMother. It wil scan all files under the path.</p>

    <pre><code class="java language-java">ObjectMother.addFixtureLocation("mocks");
        </code></pre>

    <p>Or, override
      <code>#defaultFixturePaths</code> in your custom BeanMother.</p>

    <pre><code class="java language-java block">@Override
        public String[] defaultFixturePaths() {
            // Add your fixture directory or file paths under `resources`.
            return new String[]{ 'test-models', 'fixtures' };
        }
        </code></pre>

    <p></p>

    <h4 id="customizeconverter">Customize converter</h4>

    <p>You can write your own converter for some reason.</p>

    <pre><code class="java language-java block">public class MyIntegerToStringConverter extends AbstractGenericConverter&lt;Integer, String&gt; {
            @Override
            public String convert(Integer source) {
                return String.valueOf(source + 1);
            }
        }
        </code></pre>

    <p>And, register the Converter in your custom BeanMother.</p>

    <pre><code class="java language-java block">@Override
        protected void configureConverterFactory(ConverterFactory converterFactory) {
            converterFactory.register(new MyIntegerToStringConverter());
        }
        </code></pre>

    <h4 id="customizescriptrunner">Customize ScriptRunner</h4>

    <p>You can write your own ScriptRunner</p>

    <pre><code class="java language-java block">public class MyScriptRunner implements ScriptRunner {
        
            @Override
            public Object run(ScriptFragment scriptFragment) {
                    // Do something
                return any;
            }
        
            @Override
            public boolean canHandle(ScriptFragment scriptFragment) {
                return scriptFragment.getMethodName.equal("myname");
            }
        }
        </code></pre>

    <p>And, register the ScriptRunner in your custom BeanMother.</p>

    <pre><code class="java language-java block">@Override
        protected void configureScriptHandler(ScriptHandler scriptHandler) {
            scriptHandler.register(new MyScriptRunner());     
        }
        </code></pre>

    <h2 id="tests" name="tests">Tests</h2>

    <pre><code class="block">$ mvn test
        </code></pre>

    <h2 id="contributions" name="contributions">Contributions</h2>

    <p>Any kind of contributions are very welcome! Coding style guideline is not prepared yet. Although I use Intellij IDE default
      style, follow a common sense you believe. But please 4 space indentation.</p>

  </div>





</body>

</html>